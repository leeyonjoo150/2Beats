{% extends "base.html" %}
{% block title %}í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ | 2beats{% endblock %}
{% block content %}
  <div style="margin-bottom:10px;">
    <a class="muted" href="{% url 'mylist' %}?tab={{ kind }}">â† ë§ˆì´ ë¦¬ìŠ¤íŠ¸ë¡œ</a>
  </div>

  <div class="card" style="margin-bottom:14px;">
    <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap;">
      <div>
        <p class="pill-label" style="margin:0 0 8px;">{% if is_music %}ìŒì•…{% else %}ì˜ìƒ{% endif %} í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</p>
        <h1 style="margin:0 0 6px;">{{ playlist.folder_name }}</h1>
        <p class="muted" style="margin:0;">ìƒì„±ì¼ {{ playlist.created_at|date:"Y-m-d H:i" }}</p>
      </div>
    </div>
  </div>

  <div class="card" style="margin-bottom:14px;">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap; margin-bottom:8px;">
      <h3 style="margin:0;">íŠ¸ë™ ëª©ë¡</h3>
      {% if items %}
        <span class="muted">ìˆœì„œë¥¼ ë³€ê²½í•˜ë ¤ë©´ ìˆ«ìë¥¼ ìˆ˜ì •í•˜ê³  ì €ì¥ì„ ëˆ„ë¥´ì„¸ìš”.</span>
      {% endif %}
    </div>

    {% if items %}
      <form method="post" action="">
        {% csrf_token %}
        <input type="hidden" name="action" value="reorder">
        <table>
          <thead>
            <tr>
              <th style="width: 80px;">ìˆœì„œ</th>
              <th>ì œëª©</th>
              <th>ì•„í‹°ìŠ¤íŠ¸</th>
              <th style="width: 60px;"></th> </tr>
          </thead>
          <tbody>
            {% for item in items %}
              <tr>
                <td>
                    <input type="number" name="order_{{ item.id }}" value="{{ item.order }}" min="1" 
                           style="width:60px; padding:6px; border-radius:8px; border:1px solid var(--border); background:#0c0a18; color:var(--text); text-align:center;">
                </td>
                <td>
                  {% if is_music %}
                    <a href="{% url 'music_explore:detail' item.music.id %}" style="font-weight:bold; color:var(--text);">{{ item.music.music_title }}</a>
                  {% else %}
                    <a href="{% url 'video_explore:video_detail' item.video.id %}" style="font-weight:bold; color:var(--text);">{{ item.video.video_title }}</a>
                  {% endif %}
                </td>
                <td class="muted">
                  {% if is_music %}
                    {{ item.music.music_singer }}
                  {% else %}
                    {{ item.video.video_singer }}
                  {% endif %}
                </td>
                <td>
                    </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        <div style="margin-top:16px; text-align:right;">
          <button type="submit" class="btn btn-primary" style="border:none;">ìˆœì„œ ì €ì¥</button>
        </div>
      </form>
    {% else %}
      <div style="text-align:center; padding:40px 0; color:#999;">
        <p style="font-size:2rem; margin-bottom:10px;">ğŸ“­</p>
        <p>í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</p>
        <p style="font-size:0.9rem;">
            {% if is_music %}
            <a href="{% url 'music_explore:search' %}" style="color:#1db954;">ìŒì•… ê²€ìƒ‰</a>ì´ë‚˜ ì°¨íŠ¸ì—ì„œ ë§ˆìŒì— ë“œëŠ” ê³¡ì„ ì¶”ê°€í•´ë³´ì„¸ìš”.
            {% else %}
            <a href="{% url 'video_explore:video_list' %}" style="color:#1db954;">ì˜ìƒ ëª©ë¡</a>ì—ì„œ ì˜ìƒì„ ì¶”ê°€í•´ë³´ì„¸ìš”.
            {% endif %}
        </p>
      </div>
    {% endif %}
  </div>

  {% endblock %}